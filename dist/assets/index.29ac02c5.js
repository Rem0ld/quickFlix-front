var ve=Object.defineProperty,ye=Object.defineProperties;var Ne=Object.getOwnPropertyDescriptors;var Z=Object.getOwnPropertySymbols;var Se=Object.prototype.hasOwnProperty,ke=Object.prototype.propertyIsEnumerable;var Y=(t,a,r)=>a in t?ve(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r,C=(t,a)=>{for(var r in a||(a={}))Se.call(a,r)&&Y(t,r,a[r]);if(Z)for(var r of Z(a))ke.call(a,r)&&Y(t,r,a[r]);return t},q=(t,a)=>ye(t,Ne(a));import{R as e,B as D,a as W,b as B,u as F,c as H,r as l,G as ee,F as J,n as T,M as Fe,d as Te,e as te,f as I,g as U,I as ae,L as A,O as Me,h as $,i as re,j as Le,k as $e,l as Pe,m as Ce,o as ze,p as Oe,q as De,s as We,t as Be,v as Ie,S as Ae,w as Ve,x as je,y as K,z as P,A as qe,C as He,P as Ue,D as _e}from"./vendor.c0dfe427.js";const Ge=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))c(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&c(u)}).observe(document,{childList:!0,subtree:!0});function r(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function c(n){if(n.ep)return;n.ep=!0;const s=r(n);fetch(n.href,s)}};Ge();function ne({score:t}){return e.createElement("div",{className:"flex gap-1"},t<1?e.createElement(D,null):t>=1&&t<2?e.createElement(W,null):e.createElement(B,null),t<3?e.createElement(D,null):t>=3&&t<4?e.createElement(W,null):e.createElement(B,null),t<5?e.createElement(D,null):t>=5&&t<6?e.createElement(W,null):e.createElement(B,null),t<7?e.createElement(D,null):t>=7&&t<8?e.createElement(W,null):e.createElement(B,null),t>9.5?e.createElement(B,null):t>=9&&t<=9.5?e.createElement(W,null):e.createElement(D,null))}function se(t,a){return Math.floor(Math.random()*(a-t)+t)}function X(t,a){return Math.floor(t/a*100)}function Je(t){return Math.floor(+t/3600)}function Ke(t){return Math.floor(+t%3600/60)}function le({ytKey:t}){return t.length?e.createElement("iframe",{className:"w-full aspect-video rounded-t-md",style:{aspectRatio:"16/9"},src:`https://www.youtube.com/embed/${t}?autoplay=1`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"}):e.createElement("div",{className:"h-32"})}function Xe(){const t=F(),a=H(w=>w.details);l.exports.useEffect(()=>{!a.id&&!a.name&&t("/browse")},[a]);const{_id:r,name:c,trailerYtCode:n,genres:s,resume:u,score:o,year:i,seasons:g,length:E,watched:p,percentageSeen:b}=a,[h,N]=l.exports.useState(),[m,y]=l.exports.useState(),[d,v]=l.exports.useState(0),k=w=>{t(`/player/${w}`,{state:w})};return l.exports.useEffect(()=>{N({h:Je(E),min:Ke(E)})},[E]),l.exports.useEffect(()=>{E&&p&&(y({mins:Math.floor(+p.timeWatched/60),total:Math.floor(+E/60)}),v(X(p.timeWatched,E)))},[E,p]),e.createElement(e.Fragment,null,e.createElement("div",{className:"relative"},e.createElement("button",{className:"absolute right-4 top-2 p-2 bg-white rounded-full",onClick:()=>t("/browse")},e.createElement(ee,{color:"#fff",size:22})),e.createElement(l.exports.Suspense,{fallback:"Loading..."},e.createElement(le,{ytKey:n.length?n[0]:""})),e.createElement("div",{className:"absolute bottom-16 w-2/5 flex items-center rounded-sm bg-white pr-3"},d?e.createElement(e.Fragment,null,e.createElement("div",{className:"w-9/12"},e.createElement("div",{className:"flex items-center justify-center p-1"},e.createElement("div",{className:"progress w-11/12 h-px bg-gray-500 cursor-pointer"},e.createElement("div",{style:{width:`${d}%`},className:"progressBar h-px relative bg-red-500 cursor-pointer"})))),e.createElement("span",{className:"text-gray-700 text-xs whitespace-nowrap"},m==null?void 0:m.mins," on ",m==null?void 0:m.total," mins")):""),e.createElement("button",{className:"absolute bottom-1 left-2/4 transform-gpu -translate-x-2/4 flex gap-x-2 items-center py-3 px-6 bg-white rounded-lg shadow-lg font-semibold tracking-wide",onClick:()=>k(r)},e.createElement(J,{size:16,color:"black"}),d===0?"Play":"Resume")),e.createElement("div",{className:" px-6 pt-3"},e.createElement("div",{className:"flex"},e.createElement("div",{className:"flex flex-col gap-4 w-9/12 text-gray-300 font-light"},e.createElement("div",{className:"flex gap-x-2 items-baseline"},e.createElement("h6",{className:"capitalize"},c),i?e.createElement("span",null,new Date(i).getFullYear()):"",(h==null?void 0:h.h)?e.createElement("span",null,h==null?void 0:h.h," h ",h==null?void 0:h.min," min"):"",o?e.createElement(ne,{score:o}):""),e.createElement("p",{className:"text-sm"},u)),e.createElement("div",{className:"categories flex gap-x-1 text-gray-300 font-light text-sm"},e.createElement("span",{className:"text-gray-500"},"Genres:")," ",e.createElement("span",null,s.length?s.map((w,L,S)=>L===S.length-1?e.createElement("span",{key:T()},w):e.createElement("span",{key:T()},w,", ")):""))),e.createElement("div",{className:"pt-12 text-gray-300"},(n==null?void 0:n.length)>1?e.createElement(e.Fragment,null,e.createElement("h3",{className:"text-2xl font-semibold py-5"},"Trailers"),e.createElement("div",{className:"flex gap-5 flex-wrap"},n.map((w,L)=>L===0?"":e.createElement("iframe",{key:T(),width:"200",height:"156",src:`https://www.youtube.com/embed/${w}`,title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"})))):"")))}function Re({selected:t,list:a,setSelected:r}){const[c,n]=l.exports.useState(!1);return a?e.createElement("div",{className:"relative"},e.createElement("button",{className:"flex gap-3 items-center px-2 py-3 rounded-md border bg-gray-800",onClick:()=>n(!c)},"Season ",a[t-1][0]," (",a[t-1][1].length," episodes)",e.createElement(Fe,null)),e.createElement("ul",{className:`${c?"block opacity-100":"none opacity-0"} absolute top-full w-full flex flex-col justify-center delay-75 transition-opacity items-center mt-1 rounded-sm bg-gray-800`},a.map(s=>e.createElement("li",{key:T(),onClick:()=>r(+s[0]),className:`${+s[0]===t?"bg-gray-500":""} grid place-items-center w-full p-2 cursor-pointer hover:bg-gray-500`},"Season ",s[0]," (",s[1].length," episodes)")))):null}function Qe({seasons:t}){const[a,r]=l.exports.useState(null),[c,n]=l.exports.useState(1),[s,u]=l.exports.useState(),o=l.exports.useMemo(()=>t.reduce((i,g)=>(i[g.number]||(i[g.number]=g.episodes),i),{}),[t]);return l.exports.useEffect(()=>{r(o)},[t,o]),l.exports.useEffect(()=>{a&&(u(a[c].sort((i,g)=>+i.number-+g.number)),u(a[c]))},[a,c]),e.createElement("div",null,e.createElement("div",{className:"flex items-end justify-between pb-5"},e.createElement("h3",{className:"text-2xl font-semibold "},"Episodes"),a&&e.createElement(Re,{selected:c,list:Object.entries(a),setSelected:n})),e.createElement(Ze,{season:s||[]}))}function Ze({season:t}){const a=F();return t?e.createElement("ul",null,t.map((r,c)=>{var n;return e.createElement("li",{key:T(),onClick:()=>{a(`/player/${r.ref._id}`,{state:r.ref._id})},className:`${c===0?"border-t ":""}flex items-center gap-5 h-32 w-full px-10 cursor-pointer rounded-md border-b border-gray-600`},e.createElement("h5",{className:"font-semibold text-2xl"},r.number),e.createElement("div",null,e.createElement("img",{src:"#"})),e.createElement("p",null,(n=r==null?void 0:r.ref)==null?void 0:n.resume))})):null}function Ye(){const t=F(),a=H(d=>d.detailsTvShow),{_id:r,idMovieDb:c,name:n,location:s,firstAirDate:u,posterPath:o,originCountry:i,ongoing:g,date:E,trailerYtCode:p,genres:b,resume:h,score:N,seasons:m}=a,y=d=>{t(`/player/${d}`,{state:d})};return l.exports.useEffect(()=>{!a._id&&!a.name&&t("/browse")},[a]),e.createElement(e.Fragment,null,e.createElement("div",{className:"relative"},e.createElement("button",{className:"absolute right-4 top-2 p-2 bg-white rounded-full",onClick:()=>t("/browse")},e.createElement(ee,{color:"#fff",size:22})),e.createElement(l.exports.Suspense,{fallback:"Loading..."},e.createElement(le,{ytKey:p.length?p[0]:""})),e.createElement("button",{className:"absolute bottom-1 left-2/4 transform-gpu -translate-x-2/4 flex gap-x-2 items-center py-3 px-6 bg-white rounded-lg shadow-lg font-semibold tracking-wide",onClick:()=>y(r)},e.createElement(J,{size:16,color:"black"}),"Play")),e.createElement("div",{className:" px-6 pt-3"},e.createElement("div",{className:"flex"},e.createElement("div",{className:"flex flex-col gap-4 w-9/12 text-gray-300 font-light"},e.createElement("div",{className:"flex gap-x-2 items-baseline"},e.createElement("h6",{className:"capitalize"},n),N?e.createElement(ne,{score:N}):""),e.createElement("p",{className:"text-sm"},h)),e.createElement("div",{className:"categories flex gap-x-1 text-gray-300 font-light text-sm"},e.createElement("span",{className:"text-gray-500"},"Genres:")," ",e.createElement("span",null,b.length?b.map((d,v,k)=>v===k.length-1?e.createElement("span",{key:T()},d):e.createElement("span",{key:T()},d,", ")):""))),e.createElement("div",{className:"pt-12 text-gray-300"},(m==null?void 0:m.length)?e.createElement(Qe,{seasons:m}):"",(p==null?void 0:p.length)>1?e.createElement(e.Fragment,null,e.createElement("h3",{className:"text-2xl font-semibold py-5"},"Trailers"),e.createElement("div",{className:"flex gap-5 flex-wrap"},p.map((d,v)=>v===0?"":e.createElement("iframe",{key:T(),width:"200",height:"156",src:`https://www.youtube.com/embed/${d}`,title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"})))):"")))}const et=({visible:t,hide:a,width:r,children:c})=>t?e.createElement("div",{className:"absolute inset-0 grid place-items-center min-h-screen",onClick:a,style:{top:window.scrollY}},e.createElement("div",{className:"absolute inset-0 z-50 opacity-90 bg-gray-800"}),e.createElement("div",{style:{width:r,maxHeight:785},onClick:n=>{n.stopPropagation()},className:"absolute z-50 overflow-y-scroll rounded-md bg-gray-900 pb-16 drop-shadow-md transform-gpu animate-fade-in"},c)):null;function ce({children:t}){const a=F(),[r]=l.exports.useState(!0);return Te(),l.exports.useEffect(()=>(document.body.classList.add("modal-opened"),()=>{document.body.classList.remove("modal-opened")}),[]),e.createElement(et,{visible:r,hide:()=>{a("/browse")},width:"60%"},t)}const oe={_id:"",name:"",posterPath:[],trailerYtCode:[],genres:[],year:"",resume:"",score:0,length:0,watched:{_id:"",timeWatched:0,length:0,finished:!1,video:"",user:""},season:"",subtitles:[],percentageSeen:0},ie=te({name:"details",initialState:oe,reducers:{setVideo:(t,a)=>a.payload,setLength:(t,a)=>{t.length=a.payload},setPercentage:(t,a)=>{t.percentageSeen=a.payload},setUpdateTimeWatched:(t,a)=>{t.watched||(t.watched={_id:"",timeWatched:0,length:0,finished:!1,video:"",user:""}),t.watched.timeWatched=a.payload}}}),{setVideo:ue,setLength:tt,setPercentage:Ot,setUpdateTimeWatched:at}=ie.actions;var rt=ie.reducer;const nt=({trailerYtCode:t,posterPath:a,name:r,year:c,resume:n,genres:s,score:u,length:o,watched:i,_id:g})=>{const E=F(),p=I(),b=U();l.exports.useState(!1);const[h,N]=l.exports.useState(0),[m,y]=l.exports.useState(0),d=()=>{b(ue({trailerYtCode:t,posterPath:a,name:r,_id:g,year:c,resume:n,genres:s,score:u,length:o,percentageSeen:m,watched:i,season:"",subtitles:[]}))};return l.exports.useEffect(()=>{const v=(i==null?void 0:i.timeWatched)||0,k=o||0;if(v>0&&k>0){const w=X(v,k);y(w)}},[i,o]),l.exports.useEffect(()=>{N(se(0,(t==null?void 0:t.length)||0))},[]),e.createElement(e.Fragment,null,e.createElement("div",{className:"card relative w-52 h-96"},e.createElement("div",{className:"absolute w-52 h-96 cursor-pointer bg-gray-200",onClick:()=>{d(),E(`/browse?id=${g}`,{state:{backgroundLocation:p}})}},(a==null?void 0:a.length)?e.createElement("img",{className:"w-full h-full aspect-square rounded-sm",src:`http://localhost:3050/images/${a[0]}`}):e.createElement("h1",{className:"absolute bottom-0 pl-1 text-xl capitalize text-white"},r)),m?e.createElement("div",{className:"progress w-full absolute h-1 bottom-0"},e.createElement("div",{className:"filling h-1 bg-red-600",style:{width:m+"%"}})):""))},me={_id:"",idMovieDb:"",name:"",location:"",firstAirDate:"",posterPath:[],originCountry:[],ongoing:!1,date:new Date,trailerYtCode:[],genres:[],resume:"",score:0,seasons:[]},de=te({name:"detailsTvShow",initialState:me,reducers:{setTvShow:(t,a)=>a.payload}}),{setTvShow:pe}=de.actions;var st=de.reducer;function lt(t){const{trailerYtCode:a,posterPath:r,name:c,watched:n,seasons:s}=t,u=F(),o=I(),i=U();l.exports.useState(!1),l.exports.useState(!1);const[g,E]=l.exports.useState(""),[p,b]=l.exports.useState(0),[h,N]=l.exports.useState(0);return l.exports.useEffect(()=>{if(s==null?void 0:s.length){const{_id:m}=s[0].episodes[0].ref;m&&E(m)}},[s]),l.exports.useEffect(()=>{const m=(n==null?void 0:n.timeWatched)||0,y=length||0;if(m>0&&y>0){const d=X(m,y);N(d)}},[n,length]),l.exports.useEffect(()=>{b(se(0,(a==null?void 0:a.length)||0))},[]),e.createElement(e.Fragment,null,e.createElement("div",{className:"card relative w-52 h-96"},e.createElement("div",{className:"absolute w-52 h-96 rounded-md cursor-pointer bg-gray-200",onClick:()=>{i(pe(t)),u(`/browse/tv-show?id=${t._id}`,{state:{backgroundLocation:o}})}},e.createElement("img",{className:"w-full h-full aspect-square rounded-sm",src:`http://localhost:3050/images/${r}`}),e.createElement("h1",{className:"absolute bottom-0 pl-1 text-xl capitalize text-white"},c)),h?e.createElement("div",{className:"progress w-full absolute h-1 bottom-0"},e.createElement("div",{className:"filling h-1 bg-red-600",style:{width:h+"%"}})):""))}const M="http://192.168.0.11:3050/",R={"Content-Type":"application/json"},x=30,fe=t=>({limit:t,skip:0,total:0,data:[]}),he=(t,a)=>{switch(a.type){case"addSkip":return q(C({},t),{skip:t.skip+t.limit});case"setTotal":return q(C({},t),{total:a.value});case"setData":return q(C({},t),{data:[...t.data,...a.value]});default:return t}};function ct(){const[{limit:t,skip:a,data:r,total:c},n]=l.exports.useReducer(he,fe(50)),s=async()=>await(await fetch(`${M}video?limit=${t}&skip=${a}&movie=true`)).json(),u=async()=>{const o=await s();n({type:"setData",value:o.data}),n({type:"addSkip"}),n({type:"setTotal",value:o.total})};return{movies:r,hasMoreMovie:a+t<c,fetchMoreMovies:u}}function ot(){const[{limit:t,skip:a,data:r,total:c},n]=l.exports.useReducer(he,fe(50)),s=async()=>await(await fetch(`${M}tv-show?limit=${t}&skip=${a}&populate=true`)).json(),u=async()=>{const o=await s();n({type:"setData",value:o.data}),n({type:"addSkip"}),n({type:"setTotal",value:o.total})};return{tvShows:r,hasMoreTvShow:a+t<c,fetchMoreTvShows:u}}const it=()=>{const t=U(),{movies:a,hasMoreMovie:r,fetchMoreMovies:c}=ct(),{tvShows:n,hasMoreTvShow:s,fetchMoreTvShows:u}=ot();return l.exports.useState(0),l.exports.useState(5),l.exports.useEffect(()=>{t(ue(oe)),t(pe(me))},[]),l.exports.useEffect(()=>{a.length===0&&c(),n.length===0&&u()},[a.length,n.length]),e.createElement(e.Fragment,null,e.createElement("div",{className:"h-32"}),e.createElement(ae,{className:"px-5 flex gap-6 flex-wrap mb-6",dataLength:a.length,next:c,hasMore:r,loader:e.createElement("h4",null,"Loading...")},a.map((o,i)=>e.createElement(nt,C({key:i},o)))),e.createElement(ae,{className:"px-5 flex gap-6 flex-wrap",dataLength:n.length,next:u,hasMore:s,loader:e.createElement("h4",null,"Loading...")},n.map((o,i)=>e.createElement(lt,C({key:i},o)))))};var ut="/assets/quickflix-logo-02.b9e2c896.svg",Ee="/assets/avatar-original.55771ad7.png";const mt=()=>{const t=I(),[a,r]=l.exports.useState(0),c=l.exports.useRef(null);return l.exports.useEffect(()=>{document.addEventListener("scroll",()=>{const{scrollY:n}=window;r(1*(n/100))})}),e.createElement("nav",{ref:c,style:{backgroundColor:`rgba(0,0,0, ${a})`},className:"w-full h-14 flex items-center justify-between fixed z-10 px-14 "},e.createElement("div",{className:"flex gap-x-10"},e.createElement(A,{to:"/browse",className:"text-xl text-red-500"},e.createElement("img",{src:ut,width:70})),t.pathname!=="/"&&e.createElement("div",{className:"flex justify-around gap-x-3"},e.createElement(A,{to:"/movies",className:"text-white"},"Movies"),e.createElement(A,{to:"/tv-show",className:"text-white"},"Tv-show"),e.createElement(A,{to:"/add",className:"text-white"},"Add"),e.createElement(A,{to:"/discover",className:"text-white"},"Parameters"))),t.pathname!=="/"&&e.createElement("img",{className:"rounded",src:Ee,width:32,height:40}))};function dt(){return e.createElement("div",{className:"relative min-h-screen w-screen bg-gray-900"},e.createElement(mt,null),e.createElement("div",{className:"h-14"}),e.createElement(Me,null))}var ge="/assets/logo-letter-no-bg.bfec9936.svg",pt="/assets/Frame 19.b055662d.svg",ft="/assets/Frame 20.7c5129d8.svg",ht="/assets/Frame 21.ab7753d7.svg",Et="/assets/Frame 22.dfe23e2c.svg",gt="/assets/Frame 23.2ebd0e64.svg",wt="/assets/Frame 24.781789e9.svg",xt="/assets/Frame 25.d993415e.svg",bt="/assets/Frame 26.17b1ba0d.svg";function vt(){const t=F(),a=$.timeline(),r=$.timeline(),c=l.exports.useRef(null),n=l.exports.useRef([]);return l.exports.useEffect(()=>{a.fromTo(c.current,{position:"absolute",right:0,y:-500},{y:0,duration:1}),a.to(c.current,{delay:.5,left:"0%",translateX:"-10%",opacity:0,duration:.243*9}),r.from(n.current,{opacity:0,delay:1.5,stagger:.2}),r.to(n.current,{opacity:0,stagger:.1,reversed:!0}),r.to(".card",{duration:.5,opacity:1})},[]),e.createElement(e.Fragment,null,e.createElement("div",{className:"grid place-items-center h-[calc(100vh-3.5rem)]"},e.createElement("div",{className:"relative",style:{maxHeight:200,maxWidth:"100vw"}},e.createElement("img",{src:ge,ref:c,className:"h-40 absolute"}),e.createElement("img",{src:ge,ref:s=>{n.current[8]=s},className:"h-40 inline"}),e.createElement("img",{src:pt,ref:s=>{n.current[7]=s},className:"h-40 inline"}),e.createElement("img",{src:ft,ref:s=>{n.current[6]=s},className:"h-40 inline"}),e.createElement("img",{src:ht,ref:s=>{n.current[5]=s},className:"h-40 inline"}),e.createElement("img",{src:Et,ref:s=>{n.current[4]=s},className:"h-40 inline"}),e.createElement("img",{src:gt,ref:s=>{n.current[3]=s},className:"h-40 inline"}),e.createElement("img",{src:wt,ref:s=>{n.current[2]=s},className:"h-40 inline"}),e.createElement("img",{src:xt,ref:s=>{n.current[1]=s},className:"h-40 inline"}),e.createElement("img",{src:bt,ref:s=>{n.current[0]=s},className:"h-40 inline"})),e.createElement("div",{onClick:()=>{t("/browse")},className:"card absolute w-40 h-40 opacity-0 "},e.createElement("div",{className:"w-40 h-40 absolute hover:border-4 hover:border-white rounded-lg"}),e.createElement("div",{className:"w-40 h-40 grid place-items-center bg-blue-300 rounded-lg cursor-pointer shadow-md shadow-white "},e.createElement("img",{src:Ee,className:"rounded-lg"})),e.createElement("div",{className:"text-white text-center text-lg"},"Pierrot"))))}async function yt(t,a){if(!t)return null;try{return fetch(`${M}video/${t}`,{method:"PATCH",headers:R,body:JSON.stringify(a)})}catch(r){return console.error(r),r}}async function Nt(t){if(!t)return null;try{return fetch(`${M}watched`,{method:"POST",headers:R,body:JSON.stringify({video:t})})}catch(a){return console.error(a),a}}async function St(t,a){try{return await(await fetch(`${M}watched/${t}`,{method:"PATCH",headers:R,body:JSON.stringify({timeWatched:a})})).json()}catch(r){return console.error("in api update watched",r),r}}function kt(t,a,r,c){const{id:n}=re(),s=H(f=>f.details),u=U(),[o,i]=l.exports.useState(!1),[g,E]=l.exports.useState(!1),[p,b]=l.exports.useState(0),[h,N]=l.exports.useState(0),[m,y]=l.exports.useState(!1),[d,v]=l.exports.useState(null),k=()=>{o?(t.current.pause(),i(!1)):(t.current.play(),i(!0))},w=()=>{t.current.muted=!t.current.muted,y(!t.current.muted)},L=f=>{t.current.volume=f/100},S=function(f){a.current.setAttribute("data-fullscreen",!!f)},z=()=>{g?(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen(),S(!1),E(!1)):(a.current.requestFullscreen?a.current.requestFullscreen():a.current.mozRequestFullScreen?a.current.mozRequestFullScreen():a.current.webkitRequestFullScreen?a.current.webkitRequestFullScreen():a.current.msRequestFullscreen&&a.current.msRequestFullscreen(),S(!0),E(!0))},O=()=>{u(at(t.current.currentTime)),St(n,t.current.currentTime)},V=f=>{f==="forward"?t.current.currentTime+=10:t.current.currentTime-=10,t.current.dispatchEvent(new Event("timeupdate")),O()};return l.exports.useEffect(()=>{t.current.addEventListener("loadedmetadata",async()=>{s.length||(await yt(n,{length:t.current.duration}),u(tt(t.current.duration))),b(t.current.duration),r.current.setAttribute("max",t.current.duration.toString())}),t.current.addEventListener("timeupdate",f=>{r.current.getAttribute("max")||r.current.setAttribute("max",t.current.duration.toString()),c.current.style.width=Math.floor(t.current.currentTime/t.current.duration*100)+"%"}),r.current.addEventListener("click",f=>{const _=r.current.getBoundingClientRect(),G=(f.pageX-_.left)/r.current.offsetWidth;t.current.currentTime=G*t.current.duration,O()}),document.addEventListener("fullscreenchange",function(){S(!!(document.fullscreen||document.fullscreenElement))}),document.addEventListener("webkitfullscreenchange",function(){S(!!document.webkitIsFullScreen)}),document.addEventListener("mozfullscreenchange",function(){S(!!document.mozFullScreen)}),document.addEventListener("msfullscreenchange",function(){S(!!document.msFullscreenElement)})},[]),l.exports.useEffect(()=>{var f;((f=s==null?void 0:s.watched)==null?void 0:f.timeWatched)>0&&(t.current.currentTime=s.watched.timeWatched,c.current.style.width=Math.floor(s.watched.timeWatched/t.current.duration*100)+"%")},[s.watched]),l.exports.useEffect(()=>{if(o){const f=setTimeout(()=>{O()},1e4);v(f)}else clearTimeout(d),v(null);return()=>{clearTimeout(d)}},[o]),{playPause:k,isPlaying:o,volumeOff:w,changeVolume:L,isMuted:m,duration:p,leftTime:h,handleFullScreen:z,isFullScreen:g,handleForwardBackward:V}}function we({isActive:t,action:a,placeholders:r}){return e.createElement("button",{className:"w-8 h-8 hover:scale-125 transition-all",onClick:a},t?r[0]:r[1])}function Ft({progressRef:t,progressBarRef:a}){return l.exports.useEffect(()=>{const r=new AbortController;t.current.addEventListener("mousedown",()=>{document.addEventListener("mousemove",c=>{const{clientX:n}=c;a.current.style.width=n-24+"px"},{signal:r.signal})}),document.addEventListener("mouseup",()=>{r.abort()})}),e.createElement("div",{className:"flex items-center"},e.createElement("div",{ref:t,className:"progress w-full h-1.5 bg-gray-400 rounded-xl cursor-pointer"},e.createElement("div",{ref:a,className:"progressBar w-1 h-1.5 relative rounded-lg bg-red-500 cursor-pointer"},e.createElement("span",{className:"handle block w-4 h-4 absolute -right-3 top-2/4 -translate-y-2/4 transition-opacity ease-in rounded-full opacity-0 bg-red-500 cursor-pointer"}))))}function Tt({changeVolume:t,volumeOff:a,volume:r,muted:c}){const[n,s]=l.exports.useState(1);return l.exports.useEffect(()=>{r!==n&&s(r)},[r]),e.createElement("div",{className:"popover-slider w-8 h-8  relative pt-0.5"},e.createElement("button",{id:"volume",className:"w-8 h-8 hover:scale-125 transition-all",onClick:a},!c&&r>.6&&e.createElement(Le,{color:"white",size:x}),!c&&r>.3&&r<.6&&e.createElement($e,{color:"white",size:x}),(r===0||c)&&e.createElement(Pe,{color:"white",size:x})))}function Mt({videoRef:t,videoContainer:a,progressRef:r,progressBarRef:c,children:n,idVideo:s}){var Q;const u=F(),o=I(),{name:i,type:g,watched:E}=H(j=>j.details),p=l.exports.useRef(null),b=l.exports.useRef(null);l.exports.useEffect(()=>{E||Nt(s)},[]);const{playPause:h,isPlaying:N,volumeOff:m,changeVolume:y,isMuted:d,duration:v,leftTime:k,handleFullScreen:w,isFullScreen:L,handleForwardBackward:S}=kt(t,a,r,c),[z,O]=l.exports.useState(),[V,f]=l.exports.useState(!1),_=()=>{z&&clearTimeout(z);const j=window.setTimeout(()=>{be()},1500);O(j)},G=()=>{xe(),V&&clearTimeout(z),V||_()},xe=()=>{$.to(b.current,{opacity:1}),$.to(p.current,{display:"flex",bottom:"0px"})},be=()=>{$.to(b.current,{opacity:0}),$.to(p.current,{bottom:"-80px"}).then(j=>{$.to(p.current,{display:"none"})})};return e.createElement("div",{onMouseMove:G,ref:a,className:"h-screen w-screen max-h-full relative bg-black"},e.createElement("span",{ref:b,onMouseEnter:()=>{f(!0)},onMouseLeave:()=>{f(!1)},className:"w-9 h-9 absolute z-50 left-6 top-4 cursor-pointer"},e.createElement(Ce,{onClick:()=>{o.state?u(`/browse?id=${s}`,{state:{backgroundLocation:o}}):u("/browse")},color:"white",size:x+5,className:""})),n,e.createElement("div",{ref:p,onMouseEnter:()=>{f(!0)},onMouseLeave:()=>{f(!1)},className:"h-20 w-full flex flex-col gap-y-2 justify-center absolute bottom-0 px-5 bg-black"},e.createElement(Ft,{progressBarRef:c,progressRef:r}),e.createElement("div",{className:"flex items-center justify-between"},e.createElement("div",{className:"flex gap-x-4 items-center"},e.createElement(we,{isActive:N,action:h,placeholders:[e.createElement(ze,{key:0,color:"white",size:x}),e.createElement(J,{key:1,color:"white",size:x})]}),e.createElement("button",{id:"rewind-10",className:"w-8 h-8 hover:scale-125 transition-all",onClick:()=>S("rewind")},e.createElement(Oe,{color:"white",size:x})),e.createElement("button",{id:"forward-10",className:"w-8 h-8 hover:scale-125 transition-all",onClick:()=>S("forward")},e.createElement(De,{color:"white",size:x})),e.createElement(Tt,{changeVolume:y,volumeOff:m,volume:(Q=t==null?void 0:t.current)==null?void 0:Q.volume,muted:d})),e.createElement("div",{className:"video-name w-2/5 text-white text-center font-semibold capitalize"},i),e.createElement("div",{className:"flex gap-x-4"},e.createElement("button",{id:"next",className:`${g==="tv"?"visible":"hidden"} w-8 h-8 `},e.createElement(We,{color:"white",size:x})),e.createElement("button",{id:"episodes",className:"w-8 h-8 hover:scale-125 transition-all"},e.createElement(Be,{color:"white",size:x})),e.createElement("button",{id:"subtitles",className:"w-8 h-8 hover:scale-125 transition-all"},e.createElement(Ie,{color:"white",size:x})),e.createElement("button",{id:"speed",className:"w-8 h-8 hover:scale-125 transition-all"},e.createElement(Ae,{color:"white",size:x})),e.createElement(we,{isActive:L,action:w,placeholders:[e.createElement(Ve,{key:0,color:"white",size:x}),e.createElement(je,{key:1,color:"white",size:x})]})))))}const Lt=()=>{const{id:t}=re(),a=l.exports.useRef(null),r=l.exports.useRef(null),c=l.exports.useRef(),n=l.exports.useRef(null);return e.createElement(Mt,{videoRef:a,videoContainer:r,progressBarRef:n,progressRef:c,idVideo:t||""},e.createElement("video",{ref:a,className:"h-screen absolute",preload:"metadata"},e.createElement("source",{src:`${M}stream/${t}`,type:"video/webm"}),e.createElement("source",{src:`${M}stream/${t}`,type:"video/mp4"}),e.createElement("source",{src:`${M}stream/${t}`,type:'video/mp4; codecs="avc1"'})))};function $t(){F();const t=I(),a=t.state;return e.createElement("div",null,e.createElement(K,{location:(a==null?void 0:a.backgroundLocation)||t},e.createElement(P,{path:"/"},e.createElement(P,{element:e.createElement(dt,null)},e.createElement(P,{index:!0,element:e.createElement(vt,null)}),e.createElement(P,{path:"/browse",element:e.createElement(it,null)})))),e.createElement(K,null,e.createElement(P,{path:"/player/:id",element:e.createElement(Lt,null)})),(a==null?void 0:a.backgroundLocation)&&e.createElement(K,null,e.createElement(P,{path:"/browse",element:e.createElement(ce,null,e.createElement(Xe,null))}),e.createElement(P,{path:"/browse/tv-show",element:e.createElement(ce,null,e.createElement(Ye,null))})))}const Pt=qe({reducer:{details:rt,detailsTvShow:st}});He.render(e.createElement(e.StrictMode,null,e.createElement(Ue,{store:Pt},e.createElement(_e,null,e.createElement($t,null)))),document.getElementById("root"));
