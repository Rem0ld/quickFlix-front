var ve=Object.defineProperty,ye=Object.defineProperties;var Ne=Object.getOwnPropertyDescriptors;var ae=Object.getOwnPropertySymbols;var Se=Object.prototype.hasOwnProperty,ke=Object.prototype.propertyIsEnumerable;var re=(t,a,r)=>a in t?ve(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r,W=(t,a)=>{for(var r in a||(a={}))Se.call(a,r)&&re(t,r,a[r]);if(ae)for(var r of ae(a))ke.call(a,r)&&re(t,r,a[r]);return t},G=(t,a)=>ye(t,Ne(a));import{R as e,B as V,a as q,b as _,u as P,c as B,r as l,F as Y,n as C,d as ne,M as Fe,e as z,G as Te,f as Me,g as H,I as se,L as U,O as $e,h as A,i as le,j as Le,k as Pe,l as Ce,m as De,o as Ie,p as Oe,q as ze,s as Ae,t as We,v as Be,S as je,w as Ve,x as qe,y as Z,z as D,A as _e,C as He,P as Ue,D as Je}from"./vendor.3281acf4.js";const Ge=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))c(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const m of s.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&c(m)}).observe(document,{childList:!0,subtree:!0});function r(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function c(n){if(n.ep)return;n.ep=!0;const s=r(n);fetch(n.href,s)}};Ge();function ce({score:t}){return e.createElement("div",{className:"flex gap-1"},t<1?e.createElement(V,null):t>=1&&t<2?e.createElement(q,null):e.createElement(_,null),t<3?e.createElement(V,null):t>=3&&t<4?e.createElement(q,null):e.createElement(_,null),t<5?e.createElement(V,null):t>=5&&t<6?e.createElement(q,null):e.createElement(_,null),t<7?e.createElement(V,null):t>=7&&t<8?e.createElement(q,null):e.createElement(_,null),t>9.5?e.createElement(_,null):t>=9&&t<=9.5?e.createElement(q,null):e.createElement(V,null))}function oe(t,a){return Math.floor(Math.random()*(a-t)+t)}function ee(t,a){return Math.floor(t/a*100)}function Ke(t){return Math.floor(+t/3600)}function Xe(t){return Math.floor(+t%3600/60)}function ie({ytKey:t}){return t.length?e.createElement("iframe",{className:"w-full aspect-video rounded-t-md",style:{aspectRatio:"16/9"},src:`https://www.youtube.com/embed/${t}?autoplay=1`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"}):e.createElement("div",{className:"h-32"})}function Re(){const t=P(),a=B(i=>i.details);l.exports.useEffect(()=>{!a.id&&!a.name&&t("/browse")},[a]);const{_id:r,name:c,trailerYtCode:n,genres:s,resume:m,score:o,year:u,seasons:d,length:h,watched:w,percentageSeen:p}=a,[f,T]=l.exports.useState(),[g,v]=l.exports.useState(),[N,S]=l.exports.useState(0),M=i=>{t(`/player/${i}`,{state:i})};return l.exports.useEffect(()=>{T({h:Ke(h),min:Xe(h)})},[h]),l.exports.useEffect(()=>{h&&w&&(v({mins:Math.floor(+w.timeWatched/60),total:Math.floor(+h/60)}),S(ee(w.timeWatched,h)))},[h,w]),e.createElement(e.Fragment,null,e.createElement("div",{className:"relative"},e.createElement(l.exports.Suspense,{fallback:"Loading..."},e.createElement(ie,{ytKey:n.length?n[0]:""})),e.createElement("div",{className:"absolute bottom-16 w-2/5 flex items-center rounded-sm bg-white pr-3"},N?e.createElement(e.Fragment,null,e.createElement("div",{className:"w-9/12"},e.createElement("div",{className:"flex items-center justify-center p-1"},e.createElement("div",{className:"progress w-11/12 h-px bg-gray-500 cursor-pointer"},e.createElement("div",{style:{width:`${N}%`},className:"progressBar h-px relative bg-red-500 cursor-pointer"})))),e.createElement("span",{className:"text-gray-700 text-xs whitespace-nowrap"},g==null?void 0:g.mins," on ",g==null?void 0:g.total," mins")):""),e.createElement("button",{className:"absolute bottom-1 left-2/4 transform-gpu -translate-x-2/4 flex gap-x-2 items-center py-3 px-6 bg-white rounded-lg shadow-lg font-semibold tracking-wide",onClick:()=>M(r)},e.createElement(Y,{size:16,color:"black"}),N===0?"Play":"Resume")),e.createElement("div",{className:" px-6 pt-3"},e.createElement("div",{className:"flex"},e.createElement("div",{className:"flex flex-col gap-4 w-9/12 text-gray-300 font-light"},e.createElement("div",{className:"flex gap-x-2 items-baseline"},e.createElement("h6",{className:"capitalize"},c),u?e.createElement("span",null,new Date(u).getFullYear()):"",(f==null?void 0:f.h)?e.createElement("span",null,f==null?void 0:f.h," h ",f==null?void 0:f.min," min"):"",o?e.createElement(ce,{score:o}):""),e.createElement("p",{className:"text-sm"},m)),e.createElement("div",{className:"categories flex gap-x-1 text-gray-300 font-light text-sm"},e.createElement("span",{className:"text-gray-500"},"Genres:")," ",e.createElement("span",null,s.length?s.map((i,b,y)=>b===y.length-1?e.createElement("span",{key:C()},i):e.createElement("span",{key:C()},i,", ")):""))),e.createElement("div",{className:"pt-12 text-gray-300"},(n==null?void 0:n.length)>1?e.createElement(e.Fragment,null,e.createElement("h3",{className:"text-2xl font-semibold py-5"},"Trailers"),e.createElement("div",{className:"flex gap-5 flex-wrap"},n.map((i,b)=>b===0?"":e.createElement("iframe",{key:C(),width:"200",height:"156",src:`https://www.youtube.com/embed/${i}`,title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"})))):"")))}const k="http://192.168.0.11:3050/",j={"Content-Type":"application/json"},x=30,ue={_id:"",idMovieDb:"",name:"",location:"",firstAirDate:"",posterPath:[],originCountry:[],ongoing:!1,date:void 0,trailerYtCode:[],genres:[],resume:"",score:0,seasons:[],watched:[]},me=ne({name:"detailsTvShow",initialState:ue,reducers:{setTvShow:(t,a)=>a.payload,setWatched:(t,a)=>{t.watched=a.payload}}}),{setTvShow:de,setWatched:Qe}=me.actions;var Ye=me.reducer;const pe={_id:"",name:"",posterPath:[],trailerYtCode:[],genres:[],year:"",resume:"",score:0,length:0,watched:{_id:"",timeWatched:0,length:0,finished:!1,video:"",user:"",createdAt:null,updatedAt:null},season:"",subtitles:[],percentageSeen:0},fe=ne({name:"details",initialState:pe,reducers:{setVideo:(t,a)=>a.payload,setLength:(t,a)=>{t.length=a.payload},setPercentage:(t,a)=>{t.percentageSeen=a.payload},setUpdateTimeWatched:(t,a)=>{if(!t.watched){const r=new Date;t.watched={_id:"",timeWatched:0,length:0,finished:!1,video:"",user:"",createdAt:r,updatedAt:r}}t.watched.timeWatched=a.payload}}}),{setVideo:K,setLength:Ze,setPercentage:jt,setUpdateTimeWatched:et}=fe.actions;var tt=fe.reducer;function at({selected:t,list:a,setSelected:r}){const[c,n]=l.exports.useState(!1);return a?e.createElement("div",{className:"relative"},e.createElement("button",{className:"flex gap-3 items-center px-2 py-3 rounded-md border bg-gray-800",onClick:()=>{n(!c)}},"Season ",a[t-1][0]," (",a[t-1][1].length," episodes)",e.createElement(Fe,null)),e.createElement("ul",{className:`${c?"block opacity-100":"none opacity-0"} absolute top-full w-full flex flex-col justify-center delay-75 transition-opacity items-center mt-1 z-50 rounded-sm bg-gray-800`},a.map(s=>e.createElement("li",{key:C(),onClick:m=>{m.stopPropagation(),r(+s[0]),n(!1)},className:`${+s[0]===t?"bg-gray-500":""} grid place-items-center w-full p-2 cursor-pointer hover:bg-gray-500`},"Season ",s[0]," (",s[1].length," episodes)")))):null}function rt({seasons:t}){const[a,r]=l.exports.useState(null),[c,n]=l.exports.useState(1),[s,m]=l.exports.useState(),o=l.exports.useMemo(()=>t.reduce((u,d)=>(u[d.number]||(u[d.number]=d.episodes),u),{}),[t]);return l.exports.useEffect(()=>{r(o)},[t,o]),l.exports.useEffect(()=>{a&&m(a[c].slice().sort((u,d)=>+u.number-+d.number))},[a,c]),e.createElement("div",null,e.createElement("div",{className:"flex items-end justify-between pb-5"},e.createElement("h3",{className:"text-2xl font-semibold "},"Episodes"),a&&e.createElement(at,{selected:c,list:Object.entries(a),setSelected:n})),e.createElement(nt,{season:s||[]}))}function nt({season:t}){const a=P(),r=z(),{averageLength:c,watched:n}=B(s=>s.detailsTvShow);return t?e.createElement("ul",{className:"flex flex-wrap justify-between gap-5"},t.map((s,m)=>{const o=n==null?void 0:n.filter(d=>d.videoId===s.ref._id);let u=0;return(o==null?void 0:o.length)&&(s.ref.length||c)&&(u=ee(o[0].watchedId.timeWatched,s.ref.length||c)),e.createElement("li",{key:C(),onClick:()=>{r(K(s.ref)),a(`/player/${s.ref._id}`,{state:s.ref._id})},className:`${m===0?"border-t ":""}relative flex flex-col justify-evenly items-center h-32 w-52 px-1 cursor-pointer rounded-md border border-gray-600`},e.createElement("h5",{className:"font-semibold text-2xl"},s.number),u?e.createElement("div",{className:"progress w-full self-end bg-gray-300"},e.createElement("div",{className:"filling h-1 bg-red-600",style:{width:u+"%"}})):"")})):null}function st(){const t=z(),a=P(),r=B(i=>i.detailsTvShow),{_id:c,idMovieDb:n,name:s,location:m,firstAirDate:o,posterPath:u,originCountry:d,ongoing:h,date:w,trailerYtCode:p,genres:f,resume:T,score:g,seasons:v}=r,[N,S]=l.exports.useState(null);l.exports.useEffect(()=>{(async()=>{const y=await(await fetch(`${k}watched-tv-show/by-name`,{method:"POST",headers:j,body:JSON.stringify({tvShow:s})})).json();t(Qe(y.videos))})()},[]);const M=()=>{let i="";const y=v.filter(F=>F.number==="1")[0].episodes.filter(F=>F.number==="1");N?i=N:i=y[0].ref._id,a(`/player/${i}`,{state:i})};return l.exports.useEffect(()=>{var i;if(!r._id&&!r.name&&a("/browse"),(i=r==null?void 0:r.watched)==null?void 0:i.length){const b=r.watched.slice().sort((y,F)=>{const I=new Date(y.watchedId.updatedAt).getTime();return new Date(F.watchedId.updatedAt).getTime()-I});S(b[0].videoId)}},[r]),e.createElement("div",null,e.createElement("div",{className:"relative"},e.createElement(l.exports.Suspense,{fallback:"Loading..."},e.createElement(ie,{ytKey:p.length?p[0]:""})),e.createElement("button",{className:"absolute bottom-1 left-2/4 transform-gpu -translate-x-2/4 flex gap-x-2 items-center py-3 px-6 bg-white rounded-lg shadow-lg font-semibold tracking-wide",onClick:M},e.createElement(Y,{size:16,color:"black"}),(r==null?void 0:r.watched)?e.createElement(e.Fragment,null,"Resume"):e.createElement(e.Fragment,null,"Play"))),e.createElement("div",{className:" px-6 pt-3"},e.createElement("div",{className:"flex"},e.createElement("div",{className:"flex flex-col gap-4 w-9/12 text-gray-300 font-light"},e.createElement("div",{className:"flex gap-x-2 items-baseline"},e.createElement("h6",{className:"capitalize"},s),w?e.createElement("span",null,new Date(w).getFullYear()):"",g?e.createElement(ce,{score:g}):""),e.createElement("p",{className:"text-sm"},T)),e.createElement("div",{className:"categories flex gap-x-1 text-gray-300 font-light text-sm"},e.createElement("span",{className:"text-gray-500"},"Genres:")," ",e.createElement("span",null,f.length?f.map((i,b,y)=>b===y.length-1?e.createElement("span",{key:C()},i):e.createElement("span",{key:C()},i,", ")):""))),e.createElement("div",{className:"pt-12 text-gray-300"},(v==null?void 0:v.length)?e.createElement(rt,{seasons:v}):"",(p==null?void 0:p.length)>1?e.createElement(e.Fragment,null,e.createElement("h3",{className:"text-2xl font-semibold py-5"},"Trailers"),e.createElement("div",{className:"flex gap-5 flex-wrap"},p.map((i,b)=>b===0?"":e.createElement("iframe",{key:C(),width:"200",height:"156",src:`https://www.youtube.com/embed/${i}`,title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"})))):"")))}const lt=({visible:t,hide:a,width:r,children:c})=>t?e.createElement("div",{className:"absolute inset-0 grid place-items-center min-h-screen",onClick:a,style:{top:window.scrollY}},e.createElement("div",{className:"absolute inset-0 z-50 opacity-90 bg-gray-800"}),e.createElement("div",{style:{width:r,maxHeight:785},onClick:n=>{n.stopPropagation()},className:"absolute z-50 overflow-y-scroll rounded-md bg-gray-900 pb-16 drop-shadow-md transform-gpu animate-fade-in"},e.createElement("button",{className:"absolute right-4 top-2 z-50 p-2 bg-white rounded-full",onClick:a},e.createElement(Te,{color:"#fff",size:22})),c)):null;function he({children:t}){const a=P(),[r]=l.exports.useState(!0);return l.exports.useEffect(()=>(document.body.classList.add("modal-opened"),()=>{document.body.classList.remove("modal-opened")}),[]),e.createElement(lt,{visible:r,hide:()=>{a("/browse")},width:"60%"},t)}function ct(){const[t,a]=l.exports.useState(!0),r=()=>{a(!t)};return e.createElement("aside",{className:`${t?"left-0":"left-[-120px]"} 
    flex flex-col fixed w-40 h-full py-2 rounded-r-sm bg-gray-700 text-white transform-gpu transition-all`},e.createElement("header",{className:"w-full h-fit flex justify-end px-1"},e.createElement("span",{onClick:r,className:`${t?"w-full":"rotate-180 w-8"} grid place-items-center h-8 p-1 border rounded-full bg-white cursor-pointer transition-[width]`},e.createElement(Me,{size:20,color:"black"}))),e.createElement("main",{className:`${t?"visible":"hidden"} p-2`},e.createElement("h3",{className:"my-5"},"Management by :"),e.createElement("ul",null,e.createElement("li",null,"Movies"),e.createElement("li",null,"Tv-shows"),e.createElement("li",null,"Subtitles"))))}function ot(){return e.createElement("div",null,e.createElement(ct,null))}const it=({trailerYtCode:t,posterPath:a,name:r,year:c,resume:n,genres:s,score:m,length:o,watched:u,_id:d})=>{const h=P(),w=H(),p=z();l.exports.useState(!1);const[f,T]=l.exports.useState(0),[g,v]=l.exports.useState(0),N=()=>{p(K({trailerYtCode:t,posterPath:a,name:r,_id:d,year:c,resume:n,genres:s,score:m,length:o,percentageSeen:g,watched:u,season:"",subtitles:[]}))};return l.exports.useEffect(()=>{const S=(u==null?void 0:u.timeWatched)||0,M=o||0;if(S>0&&M>0){const i=ee(S,M);v(i)}},[u,o]),l.exports.useEffect(()=>{T(oe(0,(t==null?void 0:t.length)||0))},[]),e.createElement(e.Fragment,null,e.createElement("div",{className:"card relative w-52 h-96"},e.createElement("div",{className:"absolute w-52 h-96 cursor-pointer bg-gray-200",onClick:()=>{N(),h(`/browse?id=${d}`,{state:{backgroundLocation:w}})}},(a==null?void 0:a.length)?e.createElement("img",{className:"w-full h-full aspect-square rounded-sm",src:`http://localhost:3050/images${a[0]}`}):e.createElement("h1",{className:"absolute bottom-0 pl-1 text-xl capitalize text-white"},r)),g?e.createElement("div",{className:"progress w-full absolute h-1 bottom-0"},e.createElement("div",{className:"filling h-1 bg-red-600",style:{width:g+"%"}})):""))};function ut(t){const{trailerYtCode:a,posterPath:r,name:c,seasons:n}=t,s=P(),m=H(),o=z();l.exports.useState(!1),l.exports.useState(!1);const[u,d]=l.exports.useState(""),[h,w]=l.exports.useState(0);return l.exports.useEffect(()=>{if(n==null?void 0:n.length){const{_id:p}=n[0].episodes[0].ref;p&&d(p)}},[n]),l.exports.useEffect(()=>{w(oe(0,(a==null?void 0:a.length)||0))},[]),e.createElement(e.Fragment,null,e.createElement("div",{className:"card relative w-52 h-96"},e.createElement("div",{className:"absolute w-52 h-96 rounded-md cursor-pointer bg-gray-200",onClick:()=>{o(de(t)),s(`/browse/tv-show?id=${t._id}`,{state:{backgroundLocation:m}})}},e.createElement("img",{className:"w-full h-full aspect-square rounded-sm",src:`http://localhost:3050/images${r}`}),e.createElement("h1",{className:"absolute bottom-0 pl-1 text-xl capitalize text-white"},c))))}const Ee=t=>({limit:t,skip:0,total:0,data:[]}),ge=(t,a)=>{switch(a.type){case"addSkip":return G(W({},t),{skip:t.skip+t.limit});case"setTotal":return G(W({},t),{total:a.value});case"setData":return G(W({},t),{data:[...t.data,...a.value]});default:return t}};function mt(){const[{limit:t,skip:a,data:r,total:c},n]=l.exports.useReducer(ge,Ee(50)),s=async()=>await(await fetch(`${k}video?limit=${t}&skip=${a}&movie=true`)).json(),m=async()=>{const o=await s();n({type:"setData",value:o.data}),n({type:"addSkip"}),n({type:"setTotal",value:o.total})};return{movies:r,hasMoreMovie:a+t<c,fetchMoreMovies:m}}function dt(){const[{limit:t,skip:a,data:r,total:c},n]=l.exports.useReducer(ge,Ee(50)),s=async()=>await(await fetch(`${k}tv-show?limit=${t}&skip=${a}&populate=true`)).json(),m=async()=>{const o=await s();n({type:"setData",value:o.data}),n({type:"addSkip"}),n({type:"setTotal",value:o.total})};return{tvShows:r,hasMoreTvShow:a+t<c,fetchMoreTvShows:m}}const pt=()=>{const t=z(),{movies:a,hasMoreMovie:r,fetchMoreMovies:c}=mt(),{tvShows:n,hasMoreTvShow:s,fetchMoreTvShows:m}=dt();return l.exports.useEffect(()=>{t(K(pe)),t(de(ue))},[]),l.exports.useEffect(()=>{n.length===0&&m()},[n.length]),l.exports.useEffect(()=>{a.length===0&&c()},[a.length]),e.createElement(e.Fragment,null,e.createElement("div",{className:"h-32"}),e.createElement(se,{className:"px-5 flex gap-6 flex-wrap mb-6",dataLength:a.length,next:c,hasMore:r,loader:e.createElement("h4",null,"Loading...")},a.map((o,u)=>(o.watched,e.createElement(it,W({key:u},o))))),e.createElement(se,{className:"px-5 flex gap-6 flex-wrap",dataLength:n.length,next:m,hasMore:s,loader:e.createElement("h4",null,"Loading...")},n.map((o,u)=>e.createElement(e.Fragment,{key:u},e.createElement(ut,W({},o))))))};var ft="/assets/quickflix-logo-02.b9e2c896.svg",we="/assets/avatar-original.55771ad7.png";const ht=()=>{const t=H(),[a,r]=l.exports.useState(0),c=l.exports.useRef(null);return l.exports.useEffect(()=>{const n=()=>{const{scrollY:s}=window;r(1*(s/100))};return document.addEventListener("scroll",n),()=>document.removeEventListener("scroll",n)}),e.createElement("nav",{ref:c,style:{backgroundColor:`rgba(0,0,0, ${a})`},className:"w-full h-14 flex items-center justify-between fixed z-10 px-14 "},e.createElement("div",{className:"flex gap-x-10"},e.createElement(U,{to:"/browse",className:"text-xl text-red-500"},e.createElement("img",{src:ft,width:70})),t.pathname!=="/"&&e.createElement("div",{className:"flex justify-around gap-x-3 text-white"},e.createElement(U,{to:"/movies"},"Movies"),e.createElement(U,{to:"/tv-show"},"Tv-shows"),e.createElement(U,{to:"/add"},"Add"),e.createElement(U,{to:"/dashboard"},"Dashboard"))),t.pathname!=="/"&&e.createElement("img",{className:"rounded",src:we,width:32,height:40}))};function Et(){return e.createElement("div",{className:"relative min-h-screen w-screen bg-gray-900"},e.createElement(ht,null),e.createElement("div",{className:"h-14"}),e.createElement($e,null))}var be="/assets/logo-letter-no-bg.bfec9936.svg",gt="/assets/Frame 19.b055662d.svg",wt="/assets/Frame 20.7c5129d8.svg",bt="/assets/Frame 21.ab7753d7.svg",xt="/assets/Frame 22.dfe23e2c.svg",vt="/assets/Frame 23.2ebd0e64.svg",yt="/assets/Frame 24.781789e9.svg",Nt="/assets/Frame 25.d993415e.svg",St="/assets/Frame 26.17b1ba0d.svg";function kt(){const t=P(),a=A.timeline(),r=A.timeline(),c=l.exports.useRef(null),n=l.exports.useRef([]);return l.exports.useEffect(()=>{a.fromTo(c.current,{position:"absolute",right:0,y:-500},{y:0,duration:1}),a.to(c.current,{delay:.5,left:"0%",translateX:"-10%",opacity:0,duration:.243*9}),r.from(n.current,{opacity:0,delay:1.5,stagger:.2}),r.to(n.current,{opacity:0,stagger:.1,reversed:!0}),r.to(".card",{duration:.5,opacity:1})},[]),e.createElement(e.Fragment,null,e.createElement("div",{className:"grid place-items-center h-[calc(100vh-3.5rem)]"},e.createElement("div",{className:"relative",style:{maxHeight:200,maxWidth:"100vw"}},e.createElement("img",{src:be,ref:c,className:"h-40 absolute"}),e.createElement("img",{src:be,ref:s=>{n.current[8]=s},className:"h-40 inline"}),e.createElement("img",{src:gt,ref:s=>{n.current[7]=s},className:"h-40 inline"}),e.createElement("img",{src:wt,ref:s=>{n.current[6]=s},className:"h-40 inline"}),e.createElement("img",{src:bt,ref:s=>{n.current[5]=s},className:"h-40 inline"}),e.createElement("img",{src:xt,ref:s=>{n.current[4]=s},className:"h-40 inline"}),e.createElement("img",{src:vt,ref:s=>{n.current[3]=s},className:"h-40 inline"}),e.createElement("img",{src:yt,ref:s=>{n.current[2]=s},className:"h-40 inline"}),e.createElement("img",{src:Nt,ref:s=>{n.current[1]=s},className:"h-40 inline"}),e.createElement("img",{src:St,ref:s=>{n.current[0]=s},className:"h-40 inline"})),e.createElement("div",{onClick:()=>{t("/browse")},className:"card absolute w-40 h-40 opacity-0 "},e.createElement("div",{className:"w-40 h-40 absolute hover:border-4 hover:border-white rounded-lg"}),e.createElement("div",{className:"w-40 h-40 grid place-items-center bg-blue-300 rounded-lg cursor-pointer shadow-md shadow-white "},e.createElement("img",{src:we,className:"rounded-lg"})),e.createElement("div",{className:"text-white text-center text-lg"},"Pierrot"))))}async function Ft(t,a){if(!t)return null;try{return fetch(`${k}tv-show/${t}`,{method:"PATCH",headers:j,body:JSON.stringify(a)})}catch(r){return console.error(r),r}}async function Tt(t,a){if(!t)return null;try{return fetch(`${k}video/${t}`,{method:"PATCH",headers:j,body:JSON.stringify(a)})}catch(r){return console.error(r),r}}async function Mt(t){if(!t)return null;try{return await(await fetch(`${k}video/${t}`,{method:"GET",headers:j})).json()}catch(a){return console.error(a),null}}async function $t(t){if(!t)return null;try{return fetch(`${k}watched`,{method:"POST",headers:j,body:JSON.stringify({video:t})})}catch(a){return console.error(a),a}}async function Lt(t,a,r){try{return await(await fetch(`${k}watched/${t}`,{method:"PATCH",headers:j,body:JSON.stringify({timeWatched:a,tvShow:r})})).json()}catch(c){return console.error("in api update watched",c),c}}function Pt(t,a,r,c){const{id:n}=le(),s=B(E=>E.details),{_id:m,name:o,averageLength:u}=B(E=>E.detailsTvShow),d=z(),[h,w]=l.exports.useState(!1),[p,f]=l.exports.useState(!1),[T,g]=l.exports.useState(0),[v,N]=l.exports.useState(0),[S,M]=l.exports.useState(!1),[i,b]=l.exports.useState(null),y=()=>{h?(t.current.pause(),w(!1)):(t.current.play(),w(!0))},F=()=>{t.current.muted=!t.current.muted,M(!t.current.muted)},I=E=>{t.current.volume=E/100},$=function(E){a.current.setAttribute("data-fullscreen",!!E)},J=()=>{p?(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen(),$(!1),f(!1)):(a.current.requestFullscreen?a.current.requestFullscreen():a.current.mozRequestFullScreen?a.current.mozRequestFullScreen():a.current.webkitRequestFullScreen?a.current.webkitRequestFullScreen():a.current.msRequestFullscreen&&a.current.msRequestFullscreen(),$(!0),f(!0))},L=()=>{d(et(t.current.currentTime)),Lt(n,t.current.currentTime,s.type==="tv"?o:null)},X=E=>{E==="forward"?t.current.currentTime+=10:t.current.currentTime-=10,t.current.dispatchEvent(new Event("timeupdate")),L()};return l.exports.useEffect(()=>{t.current.addEventListener("loadedmetadata",async()=>{s.length||(await Tt(n,{length:t.current.duration}),d(Ze(t.current.duration))),u||await Ft(m,{averageLength:t.current.duration}),g(t.current.duration),r.current.setAttribute("max",t.current.duration.toString())}),t.current.addEventListener("timeupdate",E=>{r.current.getAttribute("max")||r.current.setAttribute("max",t.current.duration.toString()),c.current.style.width=Math.floor(t.current.currentTime/t.current.duration*100)+"%"}),r.current.addEventListener("click",E=>{const R=r.current.getBoundingClientRect(),Q=(E.pageX-R.left)/r.current.offsetWidth;t.current.currentTime=Q*t.current.duration,L()}),document.addEventListener("fullscreenchange",function(){$(!!(document.fullscreen||document.fullscreenElement))}),document.addEventListener("webkitfullscreenchange",function(){$(!!document.webkitIsFullScreen)}),document.addEventListener("mozfullscreenchange",function(){$(!!document.mozFullScreen)}),document.addEventListener("msfullscreenchange",function(){$(!!document.msFullscreenElement)})},[]),l.exports.useEffect(()=>{var E;((E=s==null?void 0:s.watched)==null?void 0:E.timeWatched)>0&&(t.current.currentTime=s.watched.timeWatched,c.current.style.width=Math.floor(s.watched.timeWatched/t.current.duration*100)+"%")},[s.watched]),l.exports.useEffect(()=>{if(h){const E=setTimeout(()=>{L()},1e4);b(E)}else clearTimeout(i),b(null);return()=>{clearTimeout(i)}},[h]),{playPause:y,isPlaying:h,volumeOff:F,changeVolume:I,isMuted:S,duration:T,leftTime:v,handleFullScreen:J,isFullScreen:p,handleForwardBackward:X}}function xe({isActive:t,action:a,placeholders:r}){return e.createElement("button",{className:"w-8 h-8 hover:scale-125 transition-all",onClick:a},t?r[0]:r[1])}function Ct({progressRef:t,progressBarRef:a}){return l.exports.useEffect(()=>{const r=new AbortController;t.current.addEventListener("mousedown",()=>{document.addEventListener("mousemove",c=>{const{clientX:n}=c;a.current.style.width=n-24+"px"},{signal:r.signal})}),document.addEventListener("mouseup",()=>{r.abort()})}),e.createElement("div",{className:"flex items-center"},e.createElement("div",{ref:t,className:"progress w-full h-1.5 bg-gray-400 rounded-xl cursor-pointer"},e.createElement("div",{ref:a,className:"progressBar w-1 h-1.5 relative rounded-lg bg-red-500 cursor-pointer"},e.createElement("span",{className:"handle block w-4 h-4 absolute -right-3 top-2/4 -translate-y-2/4 transition-opacity ease-in rounded-full opacity-0 bg-red-500 cursor-pointer"}))))}function Dt({changeVolume:t,volumeOff:a,volume:r,muted:c}){const[n,s]=l.exports.useState(1);return l.exports.useEffect(()=>{r!==n&&s(r)},[r]),e.createElement("div",{className:"popover-slider w-8 h-8  relative pt-0.5"},e.createElement("button",{id:"volume",className:"w-8 h-8 hover:scale-125 transition-all",onClick:a},!c&&r>.6&&e.createElement(Le,{color:"white",size:x}),!c&&r>.3&&r<.6&&e.createElement(Pe,{color:"white",size:x}),(r===0||c)&&e.createElement(Ce,{color:"white",size:x})))}function It({videoRef:t,videoContainer:a,progressRef:r,progressBarRef:c,children:n,idVideo:s}){var te;const m=P(),o=H(),u=z(),{name:d,type:h,watched:w}=B(O=>O.details),p=l.exports.useRef(null),f=l.exports.useRef(null);l.exports.useEffect(()=>{w||$t(s),d||Mt(s).then(O=>{!O||u(K(O))})},[]);const{playPause:T,isPlaying:g,volumeOff:v,changeVolume:N,isMuted:S,duration:M,leftTime:i,handleFullScreen:b,isFullScreen:y,handleForwardBackward:F}=Pt(t,a,r,c),[I,$]=l.exports.useState(),[J,L]=l.exports.useState(!1),X=()=>{I&&clearTimeout(I);const O=window.setTimeout(()=>{Q()},1500);$(O)},E=()=>{R(),J&&clearTimeout(I),J||X()},R=()=>{A.to(f.current,{opacity:1}),A.to(p.current,{display:"flex",bottom:"0px"})},Q=()=>{A.to(f.current,{opacity:0}),A.to(p.current,{bottom:"-80px"}).then(O=>{A.to(p.current,{display:"none"})})};return e.createElement("div",{onMouseMove:E,ref:a,className:"h-screen w-screen max-h-full relative bg-black"},e.createElement("span",{ref:f,onMouseEnter:()=>{L(!0)},onMouseLeave:()=>{L(!1)},className:"w-9 h-9 absolute z-50 left-6 top-4 cursor-pointer"},e.createElement(De,{onClick:()=>{o.state?m(`/browse${h==="tv"?"/tv-show":""}?id=${s}`,{state:{backgroundLocation:o}}):m("/browse")},color:"white",size:x+5,className:""})),n,e.createElement("div",{ref:p,onMouseEnter:()=>{L(!0)},onMouseLeave:()=>{L(!1)},className:"h-20 w-full flex flex-col gap-y-2 justify-center absolute bottom-0 px-5 bg-black"},e.createElement(Ct,{progressBarRef:c,progressRef:r}),e.createElement("div",{className:"flex items-center justify-between"},e.createElement("div",{className:"flex gap-x-4 items-center"},e.createElement(xe,{isActive:g,action:T,placeholders:[e.createElement(Ie,{key:0,color:"white",size:x}),e.createElement(Y,{key:1,color:"white",size:x})]}),e.createElement("button",{id:"rewind-10",className:"w-8 h-8 hover:scale-125 transition-all",onClick:()=>F("rewind")},e.createElement(Oe,{color:"white",size:x})),e.createElement("button",{id:"forward-10",className:"w-8 h-8 hover:scale-125 transition-all",onClick:()=>F("forward")},e.createElement(ze,{color:"white",size:x})),e.createElement(Dt,{changeVolume:N,volumeOff:v,volume:(te=t==null?void 0:t.current)==null?void 0:te.volume,muted:S})),e.createElement("div",{className:"video-name w-2/5 text-white text-center font-semibold capitalize"},d),e.createElement("div",{className:"flex gap-x-4"},e.createElement("button",{id:"next",className:`${h==="tv"?"visible":"hidden"} w-8 h-8 `},e.createElement(Ae,{color:"white",size:x})),e.createElement("button",{id:"episodes",className:"w-8 h-8 hover:scale-125 transition-all"},e.createElement(We,{color:"white",size:x})),e.createElement("button",{id:"subtitles",className:"w-8 h-8 hover:scale-125 transition-all"},e.createElement(Be,{color:"white",size:x})),e.createElement("button",{id:"speed",className:"w-8 h-8 hover:scale-125 transition-all"},e.createElement(je,{color:"white",size:x})),e.createElement(xe,{isActive:y,action:b,placeholders:[e.createElement(Ve,{key:0,color:"white",size:x}),e.createElement(qe,{key:1,color:"white",size:x})]})))))}const Ot=()=>{const{id:t}=le(),a=l.exports.useRef(null),r=l.exports.useRef(null),c=l.exports.useRef(),n=l.exports.useRef(null);return e.createElement(It,{videoRef:a,videoContainer:r,progressBarRef:n,progressRef:c,idVideo:t||""},e.createElement("video",{ref:a,className:"h-screen absolute",preload:"metadata"},e.createElement("source",{src:`${k}stream/${t}`,type:"video/webm"}),e.createElement("source",{src:`${k}stream/${t}`,type:"video/mp4"}),e.createElement("source",{src:`${k}stream/${t}`,type:'video/mp4; codecs="avc1"'})))};function zt(){const t=H(),a=t.state;return e.createElement("div",null,e.createElement(Z,{location:(a==null?void 0:a.backgroundLocation)||t},e.createElement(D,{path:"/"},e.createElement(D,{element:e.createElement(Et,null)},e.createElement(D,{index:!0,element:e.createElement(kt,null)}),e.createElement(D,{path:"/browse",element:e.createElement(pt,null)}),e.createElement(D,{path:"/dashboard",element:e.createElement(ot,null)})))),e.createElement(Z,null,e.createElement(D,{path:"/player/:id",element:e.createElement(Ot,null)})),(a==null?void 0:a.backgroundLocation)&&e.createElement(Z,null,e.createElement(D,{path:"/browse",element:e.createElement(he,null,e.createElement(Re,null))}),e.createElement(D,{path:"/browse/tv-show",element:e.createElement(he,null,e.createElement(st,null))})))}const At=_e({reducer:{details:tt,detailsTvShow:Ye}});He.render(e.createElement(e.StrictMode,null,e.createElement(Ue,{store:At},e.createElement(Je,null,e.createElement(zt,null)))),document.getElementById("root"));
